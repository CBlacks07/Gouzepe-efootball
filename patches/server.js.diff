--- server.js
+++ server.patched.js
@@ -22,12 +22,14 @@
 const CORS_ORIGIN = process.env.CORS_ORIGIN || '*';
 const JWT_SECRET = process.env.JWT_SECRET || '1XS1r4QJNp6AtkjORvKUU01RZRfzbGV+echJsio9gq8lAOc2NW7sSYsQuncE6+o9';
 
+const useSSL = (process.env.PGSSL === 'true') || process.env.RENDER === 'true' || process.env.NODE_ENV === 'production';
 const pool = new Pool({
   host: process.env.PGHOST || '127.0.0.1',
   port: +(process.env.PGPORT || 5432),
   database: process.env.PGDATABASE || 'gz_efoot',
   user: process.env.PGUSER || 'postgres',
   password: process.env.PGPASSWORD || 'postgres',
+  ssl: useSSL ? { rejectUnauthorized: false } : false,
 });
 
 const app = express();
@@ -38,6 +40,10 @@
 
 app.use(express.json({ limit: '1mb' }));
 app.use(cors({ origin: CORS_ORIGIN === '*' ? true : CORS_ORIGIN }));
+
+
+// Healthcheck for front auto-discovery
+app.get('/health', (_req, res) => res.json({ ok:true, service:'gouzepe-api', time:new Date().toISOString() }));
 
 /* ---------- helpers SQL / HTTP ---------- */
 const q   = (text, params=[]) => pool.query(text, params);
