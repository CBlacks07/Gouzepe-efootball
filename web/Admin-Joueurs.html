<!doctype html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<title>GOUZEPE ‚Äî Admin Joueurs</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="theme.css">
  <link rel="stylesheet" href="mobile.css">
<link rel="stylesheet" href="common.css">
<script src="common.js"></script>
<meta name="color-scheme" content="dark light">

<style>
  :root{--bg:#0b1220;--panel:#0f1627;--card:#0c1426;--text:#e5e7eb;--muted:#94a3b8;--border:#1f2937;--accent:#2563eb;--brand:#16a34a}
  :root.light{--bg:#f4f6fb;--panel:#fff;--card:#fff;--text:#0f172a;--muted:#475569;--border:#e2e8f0;--accent:#2563eb;--brand:#16a34a}

  *{box-sizing:border-box} html,body{height:100%}
  body{margin:0;color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Trebuchet MS",sans-serif;
    background:
      radial-gradient(900px 600px at 20% 0%, rgba(96,165,250,.12), transparent 40%),
      radial-gradient(900px 600px at 80% 100%, rgba(34,197,94,.10), transparent 40%),
      linear-gradient(180deg, rgba(7,10,22,.94), rgba(15,23,42,.96)),
      url('assets/icons/apple-touch-icon.png') center/cover fixed no-repeat;}
  html.light body{background:
      radial-gradient(900px 600px at 20% 0%, rgba(96,165,250,.18), transparent 42%),
      radial-gradient(900px 600px at 80% 100%, rgba(34,197,94,.16), transparent 42%),
      linear-gradient(180deg, rgba(255,255,255,.86), rgba(245,247,251,.92)),
      url('assets/icons/apple-touch-icon.png') center/cover fixed no-repeat;}

  .wrap{max-width:1100px;margin:auto;padding:12px}
  .top{position:sticky;top:0;z-index:50;display:flex;align-items:center;justify-content:space-between;gap:12px;padding:8px 6px;background:rgba(12,18,32,.55);backdrop-filter:blur(6px);border-radius:14px}
  html.light .top{background:rgba(255,255,255,.7)}
  .nav{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  .logo{width:58px;height:58px;border-radius:14px;background:url('assets/icons/apple-touch-icon.png') center/cover no-repeat}
  .menu-toggle{display:inline-flex;align-items:center;justify-content:center;border:1px solid var(--border);border-radius:12px;padding:10px 14px;background:#10192c;color:var(--text);cursor:pointer}
  html.light .menu-toggle{background:#fff}

  /* === Menu Mobile Moderne === */
  #mobileMenu{
    position:fixed; inset:0; z-index:60;
    background:rgba(0,0,0,.65); backdrop-filter:blur(4px);
    display:flex; align-items:flex-start; justify-content:center;
    padding:0; opacity:0; pointer-events:none;
    transition:opacity .25s ease;
  }
  #mobileMenu:not([hidden]){ opacity:1; pointer-events:auto; }
  #mobileMenu[hidden]{ display:none }

  .mm-panel{
    width:min(94vw,400px); margin-top:0;
    background:var(--panel); color:var(--text);
    border:none; border-bottom-left-radius:16px; border-bottom-right-radius:16px;
    box-shadow:0 8px 32px rgba(0,0,0,.4);
    padding:0; max-height:90vh; overflow-y:auto;
    transform:translateY(-100%); transition:transform .3s cubic-bezier(0.4, 0, 0.2, 1);
  }
  #mobileMenu:not([hidden]) .mm-panel{ transform:translateY(0); }

  .mm-title{
    font-weight:800; text-align:center; padding:16px;
    border-bottom:1px solid var(--border); margin:0;
    position:sticky; top:0; background:var(--panel); z-index:1;
  }
  .mm-list{display:flex; flex-direction:column; gap:0; padding:8px;}
  .mm-btn{
    display:flex; align-items:center; justify-content:flex-start; gap:12px;
    padding:14px 16px; border-radius:12px; border:none;
    background:transparent; color:inherit; text-decoration:none; font-weight:600;
    transition:background .2s ease;
  }
  .mm-btn:hover, .mm-btn:active{ background:rgba(255,255,255,.06); }
  .mm-theme{display:flex; justify-content:center; padding:8px 16px; border-top:1px solid var(--border);}
  .mm-logout{display:flex; justify-content:center; padding:12px 16px; border-top:1px solid var(--border);}
  .mm-logout .btn{background:rgba(239,68,68,.12);border-color:#7f1d1d;color:#fca5a5; width:100%;}
  @media (min-width:841px){ #mobileMenu{ display:none !important } .menu-toggle{ display:none; } }

  @media (min-width: 900px){
    .menu-toggle{display:none !important}
    .nav-desktop{display:flex !important}
  }

  /* Boutons boost */
  .btn{
    display:inline-flex;align-items:center;justify-content:center;gap:8px;
    padding:10px 14px;border-radius:12px;border:1.6px solid var(--border);
    background:#10192c;color:var(--text);cursor:pointer;font-weight:700;letter-spacing:.2px;
    box-shadow:0 6px 16px rgba(0,0,0,.28); transition:.18s;
  }
  .btn:hover{transform:translateY(-1px);box-shadow:0 10px 24px rgba(0,0,0,.30)}
  .btn:active{transform:translateY(0);box-shadow:0 4px 12px rgba(0,0,0,.22)}
  .btn:focus-visible{outline:3px solid rgba(37,99,235,.55);outline-offset:2px}
  html.light .btn{background:#fff;color:#0f172a;border-color:#cbd5e1;box-shadow:0 6px 16px rgba(2,6,23,.10)}
  html.light .btn:hover{background:#f8fafc;box-shadow:0 10px 24px rgba(2,6,23,.12)}
  .btn.danger{background:#2a0c0c;border-color:#7f1d1d;color:#fecaca}
  html.light .btn.danger{background:#dc2626;border-color:#b91c1c;color:#fff}
  .btn.primary{background:#0b1b0f;border-color:#14532d;color:#d1fae5}
  html.light .btn.primary{background:#16a34a;border-color:#15803d;color:#fff}

  .card{background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:14px;box-shadow:0 8px 24px rgba(0,0,0,.24)}
  html.light .card{box-shadow:0 8px 24px rgba(2,6,23,.08)}
  .row{display:flex;gap:12px;flex-wrap:wrap}
  input,select{border:1.5px solid var(--border);border-radius:12px;padding:10px 12px;background:#0b1020;color:var(--text)}
  html.light input,html.light select{background:#fff;border-color:#cbd5e1}
  table{width:100%;border-collapse:collapse;border:1px solid var(--border);background:var(--card);border-radius:12px;overflow:hidden}
  th,td{padding:10px;border-bottom:1px solid var(--border);text-align:center}
  th{color:var(--muted)}
  html.light th{background:#f1f5f9;border-bottom:1px solid #e2e8f0}
  html.light td{border-bottom:1px solid #eef2f7}
  .muted{color:var(--muted)}
  .badge{display:inline-flex;align-items:center;gap:8px;padding:4px 8px;border:1px dashed var(--border);border-radius:999px;font-weight:600;opacity:.9}

  dialog{border:none;border-radius:14px;max-width:520px;width:min(92vw,520px);padding:0;background:var(--panel);color:var(--text)}
  dialog::backdrop{background:rgba(0,0,0,.35)}
  .dlg-h{padding:14px 16px;border-bottom:1px solid var(--border);font-weight:700}
  .dlg-b{padding:14px 16px;display:grid;gap:10px}
  .dlg-f{padding:14px 16px;border-top:1px solid var(--border);display:flex;gap:10px;justify-content:flex-end}
  .keepcase{text-transform:none !important}

  /* pastille pr√©sence simple */
  .dot{display:inline-block;width:10px;height:10px;border-radius:999px;background:#64748b;margin-right:6px}
  .dot.online{background:#22c55e}
</style>
</head>

<!-- ======= Modal √©dition joueur (+ liaison compte) ======= -->
<dialog id="editDlg">
  <div class="dlg-h">Modifier le joueur</div>
  <div class="dlg-b">
    <label>ID (cl√©) - <span class="muted">Attention : modifier l'ID affectera toutes les r√©f√©rences</span></label>
    <input id="e_pid" placeholder="ex: CBlacks_GZ">
    <input id="e_pid_old" type="hidden">

    <label>Nom</label>
    <input id="e_name" placeholder="Nom complet">

    <label>Statut</label>
    <select id="e_role">
      <option value="MEMBRE">MEMBRE</option>
      <option value="INVITE">INVITE</option>
    </select>

    <hr style="border:none;border-top:1px solid var(--border)">
    <div class="muted">Compte membre associ√© (pour connexion <b>nom@gz</b>)</div>
    <label>Email (par d√©faut : nom@gz.local)</label>
    <input id="e_email" placeholder="ex: zidane@gz.local">
    <label>Nouveau mot de passe (optionnel)</label>
    <input id="e_pwd" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">

    <div id="editMsg" class="muted">‚Äî</div>
  </div>
  <div class="dlg-f">
    <button class="btn" id="editCancel" title="Annuler et fermer sans enregistrer">Annuler</button>
    <button class="btn" id="linkUser" title="Lier ou mettre √† jour le compte membre associ√©">Lier/MAJ compte</button>
    <button class="btn primary" id="editSave" title="Enregistrer les modifications du joueur">Enregistrer</button>
  </div>
</dialog>

<body class="container">
<div class="wrap">
  <!-- ===== TOP ===== -->
  <header class="top" id="topbar">
    <a class="brand" href="./Accueil.html" aria-label="Accueil GOUZEPE">
      <img id="clubLogo" class="logo" src="assets/icons/apple-touch-icon.png" alt="Logo">
      <div class="brand-title">
        <h1>GOUZEPE eFOOTBALL</h1>
        <div class="season-sub"><span id="season-text" style="color: #16a34a; font-weight: bold;">Saison</span></div>
      </div>
    </a>

    <button id="menuToggle" class="btn ghost" aria-controls="menu" aria-expanded="false" title="Ouvrir le menu de navigation">‚ò∞ Menu</button>
    <nav class="nav" aria-label="Navigation principale">
      <div id="menu">
        <a class="btn ghost" href="./Duel.html">üí™üèΩ Duel</a>
        <a class="btn ghost" href="./Classement-general.html">üìä Classements</a>
        <a class="btn ghost" href="./Tournois.html">üèÜ Tournois</a>
        <a class="btn ghost" href="./Panel-Membre.html">üë§ Mon espace</a>
        <a class="btn ghost adminNav" href="./Admin-Joueurs.html" style="display:none">üë• Admin-Joueurs</a>
        <a class="btn ghost adminNav" href="./Admin-Utilisateurs.html" style="display:none">üõ°Ô∏è Admin Utilisateurs</a>
        <button id="logoutBtn" class="btn ghost danger" type="button" title="Se d√©connecter de votre compte">D√©connexion</button>
      </div>
    </nav>

    <div class="spacer"></div>
    <div id="season-badge" class="badge badge-top"><span class="dot"></span><span id="season-top">Saison</span></div>

    <button id="theme" class="btn ghost" title="Th√®me clair/sombre">‚òÄÔ∏è/üåô</button>

    <!-- Menu Mobile Moderne -->
<div id="mobileMenu" hidden>
  <div class="mm-panel" role="dialog" aria-modal="true" aria-labelledby="mmTitle">
    <div id="mmTitle" class="mm-title">
      <span>Menu</span>
      <button id="mmClose" class="btn ghost" style="position:absolute;right:12px;top:12px;padding:6px 10px;font-size:18px;line-height:1" aria-label="Fermer" title="Fermer le menu">‚úï</button>
    </div>
    <div class="mm-list">
      <a class="mm-btn" href="./Duel.html">üí™üèΩ Duel</a>
      <a class="mm-btn" href="./Classement-general.html">üìä Classements</a>
      <a class="mm-btn" href="./Tournois.html">üèÜ Tournois</a>
      <a class="mm-btn" href="./Panel-Membre.html">üë§ Mon espace</a>
      <a class="mm-btn adminOnly" id="mmAdminPlayers" href="./Admin-Joueurs.html" style="display:none">üë• Admin-Joueurs</a>
    </div>
    <div class="mm-theme"><button id="mmTheme" class="btn ghost" title="Basculer entre th√®me clair et sombre">‚òÄÔ∏è / üåô Th√®me</button></div>
    <div class="mm-logout"><button id="mmLogout" class="btn danger" title="Se d√©connecter de votre compte">D√©connexion</button></div>
  </div>
</div>

  </header>

  <section class="card adminOnly" style="margin-top:12px">
    <h3 style="margin:6px 0">Cr√©er / modifier un joueur</h3>
    <div class="row">
      <input id="pid" placeholder="ID (ex: CBlacks_GZ)" style="min-width:160px">
      <input id="pname" placeholder="Nom complet" style="min-width:220px;flex:1">
      <select id="prole">
        <option value="MEMBRE">MEMBRE</option>
        <option value="INVITE">INVITE</option>
      </select>
      <button id="addBtn" class="btn primary" title="Cr√©er un nouveau joueur">Ajouter</button>
    </div>
    <div id="msg" class="muted" style="margin-top:6px"></div>
  </section>

  <section class="card" style="margin-top:12px">
    <div class="row" style="justify-content:space-between;align-items:center">
      <h3 style="margin:6px 0">Joueurs enregistr√©s</h3>
      <div class="row">
        <input id="q" placeholder="Rechercher (ID/nom)..." />
        <button id="reload" class="btn" title="Recharger la liste des joueurs depuis le serveur">Rafra√Æchir</button>
      </div>
    </div>
    <div class="table-wrap" style="overflow-x:auto;-webkit-overflow-scrolling:touch">
      <table style="text-align: center;">
        <thead><tr><th>ID</th><th>Nom</th><th>Status</th><th>Compte</th><th class="adminOnly">Actions</th></tr></thead>
        <tbody id="list"></tbody>
      </table>
    </div>
  </section>
</div>

<script>
/* ===== Bootstrap minimal si common.js indispo ===== */
const DEF_API = ()=> `${location.protocol.startsWith('http')?location.protocol:'http:'}//${location.hostname}:3000`;
const API=(window.API || (localStorage.getItem('efoot.api')||DEF_API())).replace(/\/+$/,'');
const token=window.token || localStorage.getItem('efoot.token');
const role =(window.role || localStorage.getItem('efoot.role')||'member').toLowerCase();
if(!token){ location.href='login.html' }

/* ===== Th√®me + menu + logout (robuste) ===== */
(function(){
  const k='efoot.theme';
  const apply=m=>{document.documentElement.classList.toggle('light',m==='light');localStorage.setItem(k,m);document.getElementById('theme').textContent=m==='light'?'üåô':'‚òÄÔ∏è'};
  apply(localStorage.getItem(k)||'dark');
  document.getElementById('theme').onclick=()=>apply(document.documentElement.classList.contains('light')?'dark':'light');

  // Menu Mobile Moderne
  const sheet = document.getElementById('mobileMenu');
  const toggleBtn = document.getElementById('menuToggle');
  const closeBtn = document.getElementById('mmClose');
  if(sheet && toggleBtn){
    const open = ()=>{ sheet.hidden=false; document.body.style.overflow='hidden'; };
    const close= ()=>{ sheet.hidden=true;  document.body.style.overflow=''; };

    toggleBtn.addEventListener('click', (e)=>{ e.preventDefault(); open(); });
    closeBtn?.addEventListener('click', close);
    sheet.addEventListener('click', (e)=>{ if(e.target===sheet) close(); });
    document.addEventListener('keydown', (e)=>{ if(e.key==='Escape' && !sheet.hidden) close(); });

    // Synchronise avec les contr√¥les existants
    document.getElementById('mmTheme').onclick = ()=> document.getElementById('theme').click();
    document.getElementById('mmLogout').onclick = ()=> document.getElementById('logoutBtn').click();
  }

  document.getElementById('logoutBtn')?.addEventListener('click',()=>{
    if(confirm('Voulez-vous vraiment vous d√©connecter ?')){
      ['efoot.token','efoot.role','efoot.expAt'].forEach(k=>localStorage.removeItem(k));
      location.href='login.html';
    }
  });

  // visibilit√© admin-only
  document.querySelectorAll('.adminOnly').forEach(el=>el.style.display=(role==='admin')?'inline-flex':'none');
})();

/* ===== Chargement joueurs + pr√©sence ===== */
let players=[];
let ONLINE = new Set();

async function loadPresence(){
  try{
    const r = await fetch(`${API}/presence/players`, { headers:{Authorization:`Bearer ${token}`} });
    const d = await r.json();
    ONLINE = new Set(d.online || []);
  }catch(_){ ONLINE = new Set(); }
}
async function load(){
  try{
    const r=await fetch(`${API}/players`,{headers:{'Authorization':`Bearer ${token}`}});
    const d=await r.json(); players=d.players||[];
    await loadPresence();
    render();
    document.getElementById('msg').textContent='';
  }catch(e){
    document.getElementById('msg').textContent='Impossible de charger les joueurs';
  }
}
function render(){
  const q=(document.getElementById('q').value||'').toLowerCase();
  const rows=players.filter(p=>(p.player_id||'').toLowerCase().includes(q)||(p.name||'').toLowerCase().includes(q));
  const tb=document.getElementById('list'); tb.innerHTML='';
  const isAdmin = role === 'admin';
  rows.forEach(p=>{
    const tr=document.createElement('tr');
    const online = ONLINE.has(p.player_id);
    tr.innerHTML =
      `<td>${p.player_id}</td>
       <td>${p.name||''}</td>
       <td>${p.role||'MEMBRE'}</td>
       ${
         isAdmin
         ? `<td>${p.user_email ? '‚úÖ '+p.user_email : '‚Äî'}</td>`
         : `<td>${online ? '<span class="dot online"></span> En ligne' : '<span class="dot"></span> Hors ligne'}</td>`
       }
       ${isAdmin ? `<td>
          <button class="btn" data-edit="${p.player_id}">Modifier</button>
          <button class="btn danger" data-del="${p.player_id}">Supprimer</button>
        </td>` : `<td class="adminOnly"></td>`}`;
    tb.appendChild(tr);
  });
}

/* ===== CRUD ===== */
async function write(method,url,body){
  const opt={method,headers:{'Authorization':`Bearer ${token}`}};
  if(body){opt.headers['Content-Type']='application/json';opt.body=JSON.stringify(body);}
  const r=await fetch(url,opt); const d=await r.json().catch(()=>({}));
  if(!r.ok) throw new Error(d.error||`Erreur ${r.status}`);
  return d;
}
document.getElementById('addBtn').onclick=async ()=>{
  const player_id=document.getElementById('pid').value.trim();
  const name=document.getElementById('pname').value.trim();
  const roleSel=document.getElementById('prole').value||'MEMBRE';
  if(!player_id||!name){ document.getElementById('msg').textContent='ID et Nom requis'; return; }
  document.getElementById('msg').textContent='Enregistrement‚Ä¶';
  try{ await write('POST',`${API}/admin/players`,{player_id,name,role:roleSel});
       document.getElementById('msg').textContent='OK'; await load();
  }catch(e){ document.getElementById('msg').textContent=e.message||'Erreur'; }
};
document.getElementById('list').addEventListener('click',async (e)=>{
  const id = e.target.dataset.edit || e.target.dataset.del;
  if(!id) return;
  if(e.target.dataset.edit){
    openEditPlayer(id);
  }else if(e.target.dataset.del){
    if(!confirm('Supprimer ce joueur ?')) return;
    try{ await write('DELETE',`${API}/admin/players/${encodeURIComponent(id)}`); await load(); }
    catch(err){ alert(err.message||'Erreur'); }
  }
});
document.getElementById('reload').onclick=load;
document.getElementById('q').addEventListener('input',render);

/* ===== √âdition modale (joueur + liaison compte) ===== */
function slugifyNameToEmail(name){
  const domain = (localStorage.getItem('efoot.emailDomain')||'gz.local');
  const loc = (name||'')
    .normalize('NFD').replace(/[\u0300-\u036f]/g,'')
    .toLowerCase().replace(/[^a-z0-9]+/g,'.').replace(/\.+/g,'.').replace(/^\.|\.$/g,'');
  return (loc||'membre')+'@'+domain;
}
async function openEditPlayer(id){
  const p=players.find(x=>x.player_id===id); if(!p) return;
  const dlg   = document.getElementById('editDlg');
  const pid   = document.getElementById('e_pid');
  const pidOld= document.getElementById('e_pid_old');
  const pname = document.getElementById('e_name');
  const prole = document.getElementById('e_role');
  const pemail= document.getElementById('e_email');
  const ppwd  = document.getElementById('e_pwd');
  const msg   = document.getElementById('editMsg');

  pid.value   = p.player_id || '';
  pidOld.value= p.player_id || '';
  pname.value = p.name || '';
  prole.value = (p.role || 'MEMBRE').toUpperCase();
  pemail.value= p.user_email || slugifyNameToEmail(p.name||p.player_id);
  ppwd.value  = '';
  msg.textContent = '‚Äî';
  dlg.showModal();

  document.getElementById('editCancel').onclick=()=>dlg.close();

  document.getElementById('editSave').onclick = async ()=>{
    try{
      const newId = pid.value.trim();
      const oldId = pidOld.value.trim();

      if(!newId) {
        msg.textContent='ID requis';
        return;
      }

      const body = {
        name: pname.value.trim(),
        role: prole.value
      };

      // Si l'ID a chang√©, inclure le nouveau player_id
      if(newId !== oldId) {
        if(!confirm(`‚ö†Ô∏è Modifier l'ID "${oldId}" ‚Üí "${newId}"?\nCela affectera toutes les r√©f√©rences (matchs, stats, etc.)`)) {
          return;
        }
        body.player_id = newId;
      }

      msg.textContent='Mise √† jour‚Ä¶';
      await write('PUT',`${API}/admin/players/${encodeURIComponent(oldId)}`, body);
      msg.textContent='OK';
      dlg.close(); await load();
    }catch(e){ msg.textContent=e.message||'Erreur'; }
  };

  document.getElementById('linkUser').onclick = async ()=>{
    try{
      msg.textContent='Liaison du compte‚Ä¶';
      const payload={ email: pemail.value.trim(), password: ppwd.value.trim()||undefined };
      const r = await write('POST', `${API}/admin/players/${encodeURIComponent(id)}/attach_user`, payload);
      msg.textContent='Compte li√© : '+(r.user?.email||pemail.value.trim());
      await load();
    }catch(e){ msg.textContent=e.message||'Erreur'; }
  };
}

/* init */
load();
</script>

<footer style="text-align:center;font-family:'Gill Sans','Gill Sans MT',Calibri,'Trebuchet MS',sans-serif;">Copyright ¬© -GOUZEPE GAMING CLUB 2025</footer>

<!-- === GOUZEPE additive patch (non-destructif) === -->
<script>
(function(){
  try{
    const isPrivateNet=(h)=>/^(localhost|127\.0\.0\.1|10\.\d+\.\d+\.\d+|192\.168\.\d+\.\d+|172\.(1[6-9]|2\d|3[01])\.\d+\.\d+)$/.test(h||'');
    const DEF_API=()=>{
      const host=location.hostname||'';
      if(isPrivateNet(host)) return (location.protocol.startsWith('http')?location.protocol:'http:')+'//'+host+':3000';
      if(host.endsWith('.onrender.com')){
        if(host.includes('-app.')) return 'https://'+host.replace('-app.','-api.');
        if(host.includes('app.'))  return 'https://'+host.replace('app.','api.');
      }
      return 'https://gouzepe-api.onrender.com';
    };
    if(!window.API){ window.API = (localStorage.getItem('efoot.api')||DEF_API()).replace(/\/+$/,''); }
    // Auth guard
    (function(){
      const here=(location.pathname.split('/').pop()||'').toLowerCase();
      if(here==='login.html') return;
      const tok=localStorage.getItem('efoot.token')||'';
      const exp=+localStorage.getItem('efoot.expAt')||0;
      if(!tok || Date.now()>=exp){ location.href='login.html'; return; }
      const role=(localStorage.getItem('efoot.role')||'member').toLowerCase();
      const isAdminPage = /^admin-/.test(here) || here==='admin-joueurs.html' || here==='admin-utilisateurs.html';
      if(isAdminPage && role!=='admin'){ location.href='Accueil.html'; }
    })();
    // .adminOnly helper
    document.querySelectorAll('.adminOnly').forEach(el=>{
      const r=(localStorage.getItem('efoot.role')||'member').toLowerCase();
      el.style.display = r==='admin' ? '' : 'none';
    });
  }catch(e){ console.warn('additive patch error', e); }
})();
</script>

</body>
</html>
